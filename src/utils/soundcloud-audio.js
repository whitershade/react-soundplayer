!function(t){if('object'==typeof exports&&'undefined'!=typeof module)module.exports=t();else if('function'==typeof define&&define.amd)define([],t);else{var e;'undefined'!=typeof window?e=window:'undefined'!=typeof global?e=global:'undefined'!=typeof self&&(e=self),e.SoundCloudAudio=t();}}(function(){return function t(e,i,o){function n(r,a){if(!i[r]){if(!e[r]){var l='function'==typeof require&&require;if(!a&&l)return l(r,!0);if(s)return s(r,!0);var u=new Error('Cannot find module \''+r+'\'');throw u.code='MODULE_NOT_FOUND',u;}var d=i[r]={exports:{}};e[r][0].call(d.exports,function(t){var i=e[r][1][t];return n(i||t);},d,d.exports,t,e,i,o);}return i[r].exports;}for(var s='function'==typeof require&&require,r=0;r<o.length;r++)n(o[r]);return n;}({1:[function(t,e,i){'use strict';function o(t){r||(r=document.createElement('a'));var e={};r.href=t||'';for(var i=0,o=a.length;i<o;i++){var n=a[i];e[n]=r[n];}return e;}function n(t,e,i){var n=o(t),s=/\?(?:.*)$/,r=s.test(n.search)?'&':'?';return n.protocol+'//'+n.host+n.port+n.pathname+n.search+r+e+'='+i+n.hash;}function s(t){if(!(this instanceof s))return new s(t);t||console.info('SoundCloud API requires clientId, get it at https://developers.soundcloud.com'),this._events={},this._clientId=t,this._baseUrl='https://api.soundcloud.com',this.playing=!1,this.duration=0,this.audio=document.createElement('audio');}var r,a='protocol hostname host pathname port search hash href'.split(' ');s.prototype.resolve=function(t,e){var i=this._baseUrl+'/resolve.json?url='+encodeURIComponent(t)+'&client_id='+this._clientId;this._json(i,function(i){if(this.cleanData(),Array.isArray(i)){i={tracks:i},this._playlist=i;}else if(i.tracks)this._playlist=i;else{this._track=i;var n=o(t);this._track.stream_url+=n.hash;}this.duration=i.duration&&!isNaN(i.duration)?i.duration/1e3:0,e(i);}.bind(this));},s.prototype._jsonp=function(t,e){var i=document.getElementsByTagName('script')[0]||document.head,o=document.createElement('script'),s='jsonp_callback_'+(new Date).valueOf()+Math.floor(1e3*Math.random());window[s]=function(t){o.parentNode&&o.parentNode.removeChild(o),window[s]=function(){},e(t);},o.src=n(t,'callback',s),i.parentNode.insertBefore(o,i);},s.prototype._json=function(t,e){var i=new XMLHttpRequest;i.open('GET',t),i.onreadystatechange=function(){if(4===i.readyState&&200===i.status){var t={};try{t=JSON.parse(i.responseText);}catch(t){}e(t);}},i.send(null);},s.prototype.on=function(t,e){this._events[t]=e,this.audio.addEventListener(t,e,!1);},s.prototype.off=function(t,e){this._events[t]=null,this.audio.removeEventListener(t,e);},s.prototype.unbindAll=function(){for(var t in this._events){var e=this._events[t];e&&this.off(t,e);}},s.prototype.preload=function(t,e){this._track={stream_url:t},e&&(this.audio.preload=e),this.audio.src=this._clientId?n(t,'client_id',this._clientId):t;},s.prototype.play=function(t){t=t||{};var e;if(t.streamUrl)e=t.streamUrl;else if(this._playlist){var i=this._playlist.tracks.length;if(i){if(this._playlistIndex=t.playlistIndex||0,this._playlistIndex>=i||this._playlistIndex<0)return void(this._playlistIndex=0);e=this._playlist.tracks[this._playlistIndex].stream_url;}}else this._track&&(e=this._track.stream_url);if(!e)throw new Error('There is no tracks to play, use `streamUrl` option or `load` method');this._clientId&&(e=n(e,'client_id',this._clientId)),e!==this.audio.src&&(this.audio.src=e),this.playing=e,this.audio.play();},s.prototype.pause=function(){this.audio.pause(),this.playing=!1;},s.prototype.stop=function(){this.audio.pause(),this.audio.currentTime=0,this.playing=!1;},s.prototype.next=function(){var t=this._playlist.tracks.length;this._playlistIndex>=t-1||this._playlist&&t&&this.play({playlistIndex:++this._playlistIndex});},s.prototype.previous=function(){this._playlistIndex<=0||this._playlist&&this._playlist.tracks.length&&this.play({playlistIndex:--this._playlistIndex});},s.prototype.seek=function(t){if(!this.audio.readyState)return!1;var e=t.offsetX/t.target.offsetWidth||(t.layerX-t.target.offsetLeft)/t.target.offsetWidth;this.audio.currentTime=e*(this.audio.duration||0);},s.prototype.cleanData=function(){this._track=void 0,this._playlist=void 0;},s.prototype.setVolume=function(t){this.audio.readyState&&(this.audio.volume=t);},s.prototype.setTime=function(t){this.audio.readyState&&(this.audio.currentTime=t);},e.exports=s;},{}]},{},[1])(1);});
